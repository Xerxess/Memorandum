<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [自定义类型](#自定义类型)
  - [类型定义](#类型定义)
  - [结构体 (Structs)](#结构体-structs)
  - [类型别名 (Type Alias)](#类型别名-type-alias)
  - [接口类型 (Interfaces)](#接口类型-interfaces)
  - [函数类型 (Function Types)](#函数类型-function-types)
  - [泛型自定义类型 (Generic Custom Types)](#泛型自定义类型-generic-custom-types)

<!-- /code_chunk_output -->

# 自定义类型

自定义类型（Custom Types）是构建复杂程序的基础

## 类型定义

- 语法：type 新类型 基础类型
- 用途：增加语义化，为基本类型绑定方法。

```go
type Celsius float64    // 摄氏度
type Fahrenheit float64 // 华氏度

// 优点：可以为 Celsius 绑定方法
func (c Celsius) String() string {
    return fmt.Sprintf("%.2f°C", c)
}

func main() {
    var c Celsius = 25.5
    // var f Fahrenheit = c // 报错：类型不匹配，增强了安全性
}
```

## 结构体 (Structs)

- 最常用的自定义类型，用于将不同类型的数据组合在一起。
- 语法：type 结构体名 struct { 字段名 类型 }
- 特点：支持嵌套、匿名组合（继承的替代方案）。

```go
type User struct {
    ID    int
    Name  string
    Email string
}

// 结构体方法
func (u User) Greet() {
    fmt.Printf("Hello, %s\n", u.Name)
}
```

## 类型别名 (Type Alias)

- 类型别名并不是创建新类型，而是给现有类型起一个“外号”
- 语法：type 别名 = 基础类型 (注意有 = 号)
- 用途：主要用于代码重构或大型项目中的包迁移。

```go
type MyInt = int // MyInt 和 int 完全一样，不需要强制转换
```

## 接口类型 (Interfaces)

- 自定义接口定义了一组行为（方法集）

```go
type Shaper interface {
    Area() float64
}
```

## 函数类型 (Function Types)

- 函数也可以被定义为一种类型，常用于回调函数或中间件。

```go
type Validator func(string) bool

func Process(input string, check Validator) {
    if check(input) {
        fmt.Println("Valid!")
    }
}
```

## 泛型自定义类型 (Generic Custom Types)

```go
// 自定义一个泛型切片
type Stack[T any] []T

// 自定义一个泛型 Map 别名 (Go 1.24+ 增强支持)
type Registry[K comparable, V any] map[K]V
```
