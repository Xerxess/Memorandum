
# 模块

- 模块（Module） 是代码分发、版本控制和依赖管理的基石
- 模块是相关包（Packages）的集合，是版本控制的最小单元
- 每个模块的根目录下都有一个 go.mod 文件。
- 它定义了模块的路径（导入前缀）和它所依赖的其他模块版本。

## 核心指令

- go mod init name: 初始化新模块（例如 go mod init github.com）。
- go mod tidy: 最常用命令。它会自动增加缺失的依赖，删除未使用的依赖，并更新 go.sum。
- go mod vendor: 将依赖包下载到本地 vendor 目录（常用于离线构建或容器镜像优化）。
- go mod graph: 查看依赖树，用于分析包冲突。

## 关键文件解析

- go.mod
  - module: 定义模块路径。
  - go: 指定所需的最低 Go 版本（如 go 1.26）。
  - require: 列出具体的依赖模块及其版本号。
  - replace: 临时将一个模块替换为本地路径或另一个版本（常用于调试）。
- go.sum: 存储所有依赖的哈希值。它是安全锁，确保团队中所有人下载的包内容完全一致，防止代码被篡改。

```go
module example/hello

go 1.25.5

require rsc.io/quote v1.5.2

require (
	golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c // indirect
	rsc.io/sampler v1.3.0 // indirect
)
```