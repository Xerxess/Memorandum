<!-- TOC -->

- [RTC](#rtc)
- [](#)
- [视频编码](#视频编码)
    - [帧内编码](#帧内编码)
    - [帧间编码](#帧间编码)
    - [运动矢量](#运动矢量)
    - [运动补偿](#运动补偿)
    - [双向预测](#双向预测)
    - [I 帧/IDR 帧/P 帧/B 帧](#i-帧idr-帧p-帧b-帧)
- [视频编解码](#视频编解码)
    - [MPEG-4](#mpeg-4)
    - [H.264](#h264)
        - [优点](#优点)
    - [H.264 与 MPEG-4 的区别](#h264-与-mpeg-4-的区别)
    - [MPEG2-TS](#mpeg2-ts)

<!-- /TOC -->

# RTC

RTC（Real-time Communications），实时通信

RTC 包含采集、编码、前后处理、传输、解码、缓冲、渲染等很多环节

- 普通直播，一般采用 TCP 协议，使用 CDN 进行内容分发，会有几秒甚至十几秒的延时，主播和观众的互动只能通过文字短消息或送礼来进行。
- 直播连麦，使用 UDP 协议，内容实时传输，主播和观众可以进行音视频连麦互动，实时沟通，延时一般低至几百毫秒

##

- H.264 支持较广泛 编码器主要应用于低于 HD 的中小分辨率，稍微兼顾 1080P 高分辨率。
- H.265 是国际标准 Apple、高通、intel 等的芯片都支持 H.265 的硬件编解码器
- VP9 是 Google 目前主推的标准

# 视频编码

通过压缩技术，将原始视频格式的文件转换成另一种视频格式文件的方式。

## 帧内编码

帧内编码是空间域编码，利用图像空间性冗余度进行图像压缩，处理的是一幅独立的图像，不会跨越多幅图像。空间域编码依赖于一幅图像中相邻像素间的相似性和图案区的主要空间域频率。

JPEG 标准用于静止图像(即图片)，只使用了空间域压缩，只使用帧内编码。

## 帧间编码

帧间编码是时间域编码，是利用一组连续图像间的时间性冗余度进行图像压缩。如果某帧图像可被解码器使用，那么解码器只须利用两帧图像的差异即可得到下一帧图像。比如运动平缓的几帧图像的相似性大，差异性小，而运动剧烈的几幅图像则相似性小，差异性大。当得到一帧完整的图像信息后，可以利用与后一帧图像的差异值推算得到后一帧图像，这样就实现了数据量的压缩。时间域编码依赖于连续图像帧间的相似性，尽可能利用已接收处理的图像信息来“预测”生成当前图像。

MPEG 标准用于运动图像(即视频)，会使用空间域编码和时间域编码，因此是帧内编码和帧间编码结合使用。

## 运动矢量

## 运动补偿

## 双向预测

## I 帧/IDR 帧/P 帧/B 帧

- I 帧：I 帧(Intra-coded picture, 帧内编码帧，常称为关键帧)包含一幅完整的图像信息，属于帧内编码图像，不含运动矢量，在解码时不需要参考其他帧图像。因此在 I 帧图像处可以切换频道，而不会导致图像丢失或无法解码。I 帧图像用于阻止误差的累积和扩散。
- IDR 帧：IDR 帧(Instantaneous Decoding Refresh picture, 即时解码刷新帧)是一种特殊的 I 帧。当解码器解码到 IDR 帧时，会将 DPB(Decoded Picture Buffer，指前后向参考帧列表)清空，将已解码的数据全部输出或抛弃，然后开始一次全新的解码序列。
- P 帧：P 帧(Predictive-coded picture, 预测编码图像帧)是帧间编码帧，利用之前的 I 帧或 P 帧进行预测编码。
- B 帧：B 帧(Bi-directionally predicted picture, 双向预测编码图像帧)是帧间编码帧，利用之前和(或)之后的 I 帧或 P 帧进行双向预测编码。B 帧不可以作为参考帧。
  B 帧具有更高的压缩率，但需要更多的缓冲时间以及更高的 CPU 占用率，因此 B 帧适合本地存储以及视频点播，而不适用对实时性要求较高的直播系统。

# 视频编解码

标准包括：JPEG、MJPEG、JPEG2000、H.261、MPEG-1、H.262/MPEG-2、H.263、MPEG-4 (Part2/ASP)、H.264/MPEG-4 (Part10/AVC)、H.265/MPEG-H (Part2/HEVC)、H.266/VVC、VP8/VP9、AV1、AVS1/AVS2、SVAC1/SVAC2

> JPEG

JPEG 是 Joint Photographic Experts Group(联合图像专家小组)的缩写，是第一个国际图像压缩标准。JPEG 图像压缩算法能够在提供良好的压缩性能的同时，具有比较好的重建质量，被广泛应用于图像、视频处理领域。

> MJPEG

M-JPEG（Motion- Join Photographic Experts Group）技术即运动静止图像（或逐帧）压缩技术，广泛应用于非线性编辑领域可精确到帧编辑和多层图像处理，把运动的视频序列作为连续的静止图像来处理，这种压缩方式单独完整地压缩每一帧，在编辑过程中可随机存储每一帧，可进行精确到帧的编辑，此外 M-JPEG 的压缩和解压缩是对称的，可由相同的硬件和软件实现。但 M-JPEG 只对帧内的空间冗余进行压缩。不对帧间的时间冗余进行压缩，故压缩效率不高。

> MPEG-4 (Part2/ASP)

具体压缩算法，它是针对数字电视、交互式绘图应用（影音合成内容）、交互式多媒体（WWW、资料撷取与分散）等整合及压缩技术的需求而制定的国际标准。MPEG-4标准将众多的多媒体应用集成于一个完整的框架内，旨在为多媒体通信及应用环境提供标准的算法及工具，从而建立起一种能被多媒体传输、存储、检索等应用领域普遍采用的统一数据格式

> H.264/MPEG4 (Part10 AVC)

 H.264是由ISO/IEC与ITU-T组成的联合视频组(JVT)制定的新一代视频压缩编码标准。

 > H.265/HEVC

 H.265是ITU-T VCEG 继H.264之后所制定的新的视频编码标准。H.265标准围绕着现有的视频编码标准H.264，保留原来的某些技术，同时对一些相关的技术加以改进。新技术使用先进的技术用以改善码流、编码质量、延时和算法复杂度之间的关系，达到最优化设置。具体的研究内容包括:提高压缩效率、提高鲁棒性和错误恢复能力、减少实时的时延、减少信道获取时间和随机接入时延、降低复杂度等。H264由于算法优化，可以低于1Mbps的速度实现标清数字图像传送;H265则可以实现利用1~2Mbps的传输速度传送720P(分辨率1280*720)普通高清音视频传送。

视频编解码技术定义方面有两大标准机构:

- 国际电信联盟（ITU） H.26x 标准
- 国际标准化组织（ISO）MPEG 标准

## MPEG-4

MPEG-4（MPEG-4 Part 2）技术的标准是对运动图像中的内容进行编码，其具体的编码对象就是图像中的音频和视频，术语称为"AV 对象"，高效率地编码、组织、存储、传输 AV 对象是 MPEG-4 标准的基本内容。

- 视频编码:MPEG-4 支持对自然和合成的视觉对象的编码（合成的视觉对象包括 2D、3D 动画和人面部表情动画等）。

- 音频编码:MPEG-4 可以在一组编码工具支持下，对语音、音乐等自然声音对象和具有回响、空间方位感的合成声音对象进行音频编码。

## H.264

以 MPEG-4 技术为基础进行更适于视频会议（Video Conference）运用的衍生发展，联合制订了一个新的标准。这个标准，ITU-T 方面称之为 H.264。但 ISO/IEC 的则将这个新标准归纳于 MPEG 系列，称为 MPEG-4 Part 10（第 10 部分，也叫 ISO/IEC 14496-10），MPEG-4 Part 10 的另一个代称是 MPEG-4 AVC（Advanced Video Coding，先进视频编码）。

H.264 其实与 MPEG－4/AVC 就是同一回事，即 H.264 = MPEG-4 Part 10 = ISO/IEC 14496-10 = MPEG-4 AVC。

### 优点

- 高效压缩：与 H.263+和 MPEG4 SP 相比，减小 50%比特率；
- 延时约束方面有很好的柔韧性；
- 容错能力；
- 编/解码的复杂性可伸缩性；
- 解码全部细节：没有不匹配；
- 高质量应用；
- 网络友善。

## H.264 与 MPEG-4 的区别

## MPEG2-TS

MPEG2-TS 传输流（MPEG-2 Transport Stream；又称 MPEG-TS、MTS、TS）是一种传输和存储包含视频、音频与通信协议各种数据的标准格式，用于数字电视广播系统，如 DVB、ATSC、ISDB、IPTV 等等。

MPEG2-TS格式的特点就是要求从视频流的任一片段开始都是可以独立解码
