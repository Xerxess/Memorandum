
# 2D 骨骼系统

## Skeleton2D

- Skeleton2D 代表整套骨架（比如“主角的全身”）。是 Godot 2D 骨骼动画系统的总指挥部。它本身不显示任何东西，但它定义了所有骨骼的层级关系。
- Bone2D 代表具体的骨头（比如“大臂”、“小臂”）。

## SkeletonModification2D

通常放在 Skeleton2D 节点的 Modification Stack（修改栈） 中，按照从上到下的顺序执行。

- 派生类
  - SkeletonModification2DCCDIK
  - SkeletonModification2DFABRIK
  - SkeletonModification2DJiggle
  - SkeletonModification2DLookAt
  - SkeletonModification2DPhysicalBones
  - SkeletonModification2DStackHolder
  - SkeletonModification2DTwoBoneIK

### 三种主要的 反向动力学 (IK) 算法

- TwoBoneIK（双骨骼 IK）
  - 原理： 用高中几何（余弦定理）解三角形。
  - 限制： 只能处理 2 根骨骼（如：大腿+小腿）。
  - 特点： 极快、稳定、计算精确。
  - 适用： 人的手臂、腿部。
- CCDIK（循环坐标下降法）
  - 原理： 每一根骨头轮流转动，直到末端靠近目标。
  - 处理骨骼数：多根
  - 特点： 这种算法骨头会转得比较“机械”，但它完美支持角度限制（Constraints）。
  - 适用： 机械臂、需要严格控制转动角度的关节。
- FABRIK（前向/后向迭代算法）
  - 原理： 像拉动一根绳子一样，先从末端拉向目标，再从根部拉回原位，循环几次。
  - 处理骨骼数：多根
  - 特点： 动作比 CCDIK 更自然、平滑，支持长链骨骼，但通常不支持复杂的角度限制。
  - 适用： 触手、长长的尾巴、绳索。

### 功能性修改器

- Jiggle（抖动/弹簧）
  - 作用： 给骨骼加上“惯性”。当身体移动时，这串骨骼会产生延迟和弹跳感。
  - 处理骨骼数：多根
  - 适用： 头发、衣服边缘、尾巴的自然摆动。
- LookAt
  - 作用： 强制骨骼始终指向某个目标点。
  - 处理骨骼数：1 根
  - 适用： 角色注视目标的头部、指向敌人的枪管。
- PhysicalBones（物理骨骼）
  - 作用： 将骨骼与 PhysicalBone2D 节点关联，使骨骼受物理引擎驱动（如重力、碰撞）。
  - 适用： 角色死亡时的“布娃娃”效果（Ragdoll）。

### 辅助型修改器

- StackHolder（栈持有者）
  - 作用： 这是一个容器，它允许你在一个修改栈中嵌套另一个修改栈。
  - 适用： 复杂的骨骼架构，比如你想把“手臂的 IK 逻辑”封装成一个独立的资源，反复复用。
