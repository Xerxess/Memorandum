<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [日期时间](#日期时间)
  - [TimeInterval](#timeinterval)
  - [Date](#date)
    - [Topics](#topics)
    - [格式化](#格式化)
      - [Date.FormatStyle](#dateformatstyle)
      - [Date.ISO8601FormatStyle](#dateiso8601formatstyle)

<!-- /code_chunk_output -->

# 日期时间

## TimeInterval

```swift
typealias TimeInterval = Double
```

## Date

```swift
let now = Date.now
// 默认日志打印下显示 协调世界时（UTC）时区下的时间
print(now) // 2023-12-14 03:06:59 +0000
print(now.description) // 2023-12-14 03:06:59 +0000

let date2 = Date(timeIntervalSince1970: 1702523219.958)
print(date2.description(with: Locale(identifier: "en-US"))) 
// Thursday, December 14, 2023 at 11:06:59 AM China Standard Time

print(date2.description(with: Locale(identifier: "zh-CN"))) 
// 2023年12月14日 星期四 中国标准时间 11:06:59
```

### Topics

```swift
// 返回一个日期实例，表示访问时的当前日期和时间
static var now: Date

// 日期值与当前日期和时间之间的时间间隔。
var timeIntervalSinceNow: TimeInterval

// 日期值与 2001 年 1 月 1 日 00:00:00 UTC 之间的间隔。
var timeIntervalSinceReferenceDate: TimeInterval

// 日期值与 1970 年 1 月 1 日 00:00:00 UTC 之间的间隔。
var timeIntervalSince1970: TimeInterval

// 返回从此日期到另一个日期的距离，指定为时间间隔。
func distance(to: Date) -> TimeInterval

// 返回此日期与另一个给定日期之间的间隔
func timeIntervalSince(_ date: Date) -> TimeInterval

// 向该日期添加时间间隔。
func addTimeInterval(TimeInterval)

// 通过向该日期添加时间间隔来创建新的Date。
func addingTimeInterval(TimeInterval) -> Date

// 返回距该日期指定时间间隔的Date。
func advanced(by: TimeInterval) -> Date
```

### 格式化

- `yyyy-MM-dd` 国际标准化组织（ISO）制定的日期表示形式，也被称为 "年-月-日" 格式,想要实现此格式 关注api文档 iso8601 关键字
- `yyyy/MM/dd` 在许多国家和地区中使用，包括美国和日本等

```swift
// zh-CN
let nowDate = Date.now

print(nowDate.formatted())
// 2023/12/14 11:26

print(nowDate.formatted(date:.abbreviated, time: .omitted)) // 2023年12月14日
print(nowDate.formatted(date:.complete, time: .omitted)) // 2023年12月14日 星期四
print(nowDate.formatted(date:.long, time: .omitted)) // 2023年12月14日
print(nowDate.formatted(date:.numeric, time: .omitted)) // 2023/12/14
print(nowDate.formatted(date:.omitted, time: .omitted)) // 2023/12/14 11:42

print(nowDate.formatted(date:.omitted, time: .complete)) // GMT+8 11:46:05
print(nowDate.formatted(date:.omitted, time: .omitted)) // 2023/12/14 11:46
print(nowDate.formatted(date:.omitted, time: .shortened)) // 11:46
print(nowDate.formatted(date:.omitted, time: .standard)) // 11:46:05
```

#### Date.FormatStyle

```swift
var dateStyle = Date.FormatStyle()
print(nowDate.formatted(dateStyle)) // 2023/12/14 18:44

// year
dateStyle = dateStyle.year() // 默认.defaultDigits
print(nowDate.formatted(dateStyle)) // 2023年

dateStyle = dateStyle.year(.defaultDigits)
print(nowDate.formatted(dateStyle)) // 2023年

dateStyle = dateStyle.year(.twoDigits)
print(nowDate.formatted(dateStyle)) // 23年

dateStyle = dateStyle.year(.padded(2))
print(nowDate.formatted(dateStyle)) // 23年

dateStyle = dateStyle.year(.extended(minimumLength: 2))
print(nowDate.formatted(dateStyle)) // 23年
```

#### Date.ISO8601FormatStyle

```swift
let newDateStyle:Date.ISO8601FormatStyle = .iso8601
print(Date.now.formatted(newDateStyle.dateSeparator(.dash))) // 2023-12-14T10:45:38Z
print(Date.now.formatted(newDateStyle.dateSeparator(.omitted))) // 20231214T10:45:38Z

print(Date.now.formatted(newDateStyle.timeSeparator(.colon))) // 2023-12-14T10:45:38Z
print(Date.now.formatted(newDateStyle.timeSeparator(.omitted))) // 2023-12-14T104714Z
```
