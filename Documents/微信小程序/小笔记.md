<!-- TOC -->

- [小程序跳转二级页面 tabbar](#小程序跳转二级页面-tabbar)
- [dataset 设置（获取）节点数据](#dataset-设置获取节点数据)
- [canvasContent 的获取](#canvascontent-的获取)
- [cover-image 显示base64位图片](#cover-image-显示base64位图片)
- [getCurrentPages()](#getcurrentpages)
- [page配制 navigationStyle](#page配制-navigationstyle)
- [onUnload](#onunload)
- [取消next页返回按钮](#取消next页返回按钮)
- [小程序调试模式](#小程序调试模式)
- [选择器[attr]](#选择器attr)
- [background-image](#background-image)

<!-- /TOC -->

# 小程序跳转二级页面 tabbar

* 自己模拟tabar
* 渲染主要是条件渲染(页面可能会卡顿)

# dataset 设置（获取）节点数据

* 由于小程序没dom节点，所有无法通过节点获得节点内容，通过data-* 设置获取

```html
<text data-value='test'>test</text>
```

```js
click(event) {
			let value = event.target.dataset.value;
		}
```

# canvasContent 的获取

* 注意第二个参数
```js
// 在自定义组件中需要配置第二个参数
this.canvasContext = uni.createCanvasContext('canvas', this);
```

# cover-image 显示base64位图片

* 显示base64位图片在调试中无法展示(生产需要测试是否是安全域问题)

# getCurrentPages()

* 查看路由栈中的信息，可以获取上一个页面的数据
* 不建议修改数据，可以采用 uniapp 的事件订阅模式，更灵活

```js
// 订阅页面
console.log('----------------setFormData订阅-------------------');
uni.$on('setFormData', function(data) {
    that.formData = {
        ...that.formData,
        ...data
    }
    console.log(that.formData);
})
uni.$on('getFormData', function(data) {
    return that.formData
})
console.log('----------------setFormData订阅成功-------------------');

// 使用页面
uni.$emit('setFormData', {
    ...data
});
```

# page配制 navigationStyle

* 注意7.0.0+支持 
* 截至2019-7-16 微信版本为7.0.5 
* 设置自定义navigation
* 可以隐藏返回按钮

# onUnload

* 不要在里面再执行跳转

# 取消next页返回按钮

* 使用reLaunch() 注意这个方法会移除所有页面，包括tab页
* 小程序不支持监听返回上一页事件,需要自己处理

# 小程序调试模式

* 需要通过ip测试。
* 在没有设置安全域情况下，可以打开调试模式进行测试

# 选择器[attr]

* 可能不支持
* 采用data-*

# background-image

* 网络url或者base64
* 本地图片要用image标签才行