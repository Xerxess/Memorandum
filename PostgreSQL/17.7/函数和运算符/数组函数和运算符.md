<https://www.postgresql.org/docs/17/functions-array.html>

# 常用运算符

运算符| 描述 |示例 |结果
-|-|-|-
` || ` |连接数组或添加元素
@> |包含（左包含右） |ARRAY[1,2,3] @> ARRAY[1,2] |t (true)
<@ |被包含（左被右包含） |ARRAY[1,2] <@ ARRAY[1,2,3] |t
&& |是否有重叠（交集不为空） |ARRAY[1,2] && ARRAY[2,3] |t
= / <> |相等 / 不等 |ARRAY[1,2] = ARRAY[1,2] |t

# 常用函数


```sql
-- unnest(anyarray): 将数组行转列（一行变多行）
SELECT unnest(ARRAY['A', 'B', 'C']); -- 产生 3 行数据

-- array_agg(expression): 将多行数据聚合成一个数组（多行变一行）
SELECT array_agg(name) FROM users; -- 返回 {Alice,Bob,...}

-- 获取数组在指定维度的长度
SELECT array_length(ARRAY[1,2,3], 1); -- 返回 3
SELECT array_length(ARRAY[[1,2,3]], 1);  -- 返回 1

-- 获取数组中所有元素的总数（最推荐的获取长度方式）。
SELECT cardinality(ARRAY[1,2,3]); -- 返回 3
```